
/* index.css */
/* Basic Reset & Root Variables */
:root {
  /* Light Theme (Default - iOS Inspired) */
  --primary-color: #007AFF; /* iOS Blue */
  --secondary-color: #5856D6; /* iOS Purple */
  --accent-color: #FF9500; /* iOS Orange */
  --admin-color: #34C759; /* iOS Green */
  
  --background-color: #F2F2F7; /* iOS System Gray 6 */
  --secondary-background-color: #FFFFFF; /* For elements like sidebars, cards if not blurred */
  --card-background-color: rgba(255, 255, 255, 0.85); /* Semi-transparent white for cards (frosted glass) */
  --modal-background-color: rgba(242, 242, 247, 0.9); /* Slightly more opaque background for modals */
  
  --text-color: #000000; /* Darker for better contrast - Was #111111 */
  --subtle-text-color: #3c3c4399; /* iOS Label Color - Secondary - Was #555555 */
  --placeholder-text-color: #3c3c434d; /* iOS Placeholder Text Color - Was #999999 */
  --border-color: #D1D1D6; /* iOS System Gray 4 */
  --divider-color: #E5E5EA; /* iOS System Gray 5 */
  
  --error-color: #FF3B30; /* iOS Red */
  --success-color: #34C759; /* iOS Green */
  --warning-color: #FFCC00; /* iOS Yellow */
  --info-color: #007AFF; /* iOS Blue (can be same as primary) */
  --link-color: var(--primary-color);
  
  --achievement-bronze-color: #CD7F32;
  --achievement-silver-color: #C0C0C0;
  --achievement-gold-color: #FFD700;
  --achievement-platinum-color: #6A86A1; 

  --font-family-sans-serif: "Inter", -apple-system, BlinkMacSystemFont, "Roboto", "Helvetica Neue", Arial, sans-serif;
  --font-size-base: 16px; /* Default M */
  --font-size-xs: 13px;
  --font-size-s: 14.5px;
  --font-size-m: 16px;
  --font-size-l: 17.5px;

  --border-radius: 12px; /* iOS like rounded corners */
  --border-radius-small: 8px;
  --border-radius-large: 16px;
  
  --box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
  --box-shadow-light: 0 2px 8px rgba(0, 0, 0, 0.08);
  --box-shadow-strong: 0 8px 20px rgba(0, 0, 0, 0.12);

  --transition-speed: 0.25s cubic-bezier(0.4, 0, 0.2, 1);
  --animation-speed-fast: 0.2s;
  --animation-speed-medium: 0.35s;
  --animation-speed-slow: 0.5s;

  --header-height: 60px; /* Reduced slightly */
  --footer-height: 48px; 
  --chat-input-area-height: 70px;
  
  --dashboard-sidebar-width: 240px; /* Reduced from 280px */
  --dashboard-sidebar-width-compact: 160px; /* Reduced from 180px */
  --dashboard-sidebar-width-iconic: 72px;   /* Reduced from 80px */
  --help-chat-sidebar-width: 300px; /* Reduced from 320px */
  --admin-support-sidebar-width: 320px; /* Reduced from 340px */
  
  --content-max-width: 1200px; 
  --content-padding: 20px; /* Reduced slightly */  
  --content-padding-spacious: 32px; /* Reduced slightly */


  /* VK Style Chat Vars (Light Theme) */
  --vk-chat-bg: var(--background-color); 
  --vk-chat-user-bg: var(--primary-color); 
  --vk-chat-user-text: #FFFFFF;
  --vk-chat-model-bg: #E5E5EA; /* Slightly darker than pure white for model/admin bubbles */
  --vk-chat-model-text: var(--text-color);
  --vk-chat-input-bg: var(--secondary-background-color); 
  --vk-chat-input-border: var(--border-color);
  --vk-chat-header-bg: var(--secondary-background-color);
  --vk-chat-header-border: var(--divider-color);
  --vk-chat-sidebar-bg: var(--secondary-background-color);
  --vk-chat-sidebar-border: var(--divider-color);
  --vk-chat-send-button-color: var(--primary-color);
}

[data-theme="dark"] {
  --primary-color: #0A84FF; 
  --secondary-color: #5E5CE6; 
  --accent-color: #FF9F0A; 
  --admin-color: #30D158; 

  --background-color: #000000; 
  --secondary-background-color: #1C1C1E; 
  --card-background-color: rgba(28, 28, 30, 0.85); 
  --modal-background-color: rgba(0,0,0, 0.9);
  
  --text-color: #FFFFFF;
  --subtle-text-color: #8E8E93; 
  --placeholder-text-color: #636366; 
  --border-color: #38383A; 
  --divider-color: #2C2C2E; 
  
  --error-color: #FF453A;
  --success-color: #30D158;
  --warning-color: #FFD60A;
  --info-color: #0A84FF;
  --link-color: var(--primary-color);
  
  --achievement-bronze-color: #D98F49; 
  --achievement-silver-color: #DADADA; 
  --achievement-gold-color: #FFDC33;   
  --achievement-platinum-color: #8AA6C1;

  /* VK Style Chat Vars (Dark Theme) */
  --vk-chat-bg: var(--background-color); 
  --vk-chat-user-bg: var(--primary-color); 
  --vk-chat-user-text: #FFFFFF; 
  --vk-chat-model-bg: #2C2C2E; /* Darker gray for model/admin bubbles */
  --vk-chat-model-text: var(--text-color);
  --vk-chat-input-bg: var(--secondary-background-color);
  --vk-chat-input-border: var(--border-color);
  --vk-chat-header-bg: var(--secondary-background-color);
  --vk-chat-header-border: var(--divider-color);
  --vk-chat-sidebar-bg: var(--secondary-background-color);
  --vk-chat-sidebar-border: var(--divider-color);
  --vk-chat-send-button-color: var(--primary-color);
}


*, *::before, *::after { box-sizing: border-box; }

body {
  margin: 0; 
  font-family: var(--font-family-sans-serif); 
  background-color: var(--background-color);
  color: var(--text-color); 
  line-height: 1.5; 
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale; 
  font-size: var(--font-size-base); 
  transition: background-color var(--transition-speed), color var(--transition-speed), font-size var(--transition-speed);
  overflow-x: hidden; 
}
body.font-size-xs { font-size: var(--font-size-xs); }
body.font-size-s { font-size: var(--font-size-s); }
body.font-size-m { font-size: var(--font-size-m); } 
body.font-size-l { font-size: var(--font-size-l); }


body::-webkit-scrollbar, 
.dashboard-content::-webkit-scrollbar, 
.admin-content::-webkit-scrollbar, 
.chat-sessions-list::-webkit-scrollbar, 
.support-tickets-sidebar ul::-webkit-scrollbar,
.code-block-wrapper::-webkit-scrollbar,
.top-users-list::-webkit-scrollbar, 
.achievements-list::-webkit-scrollbar, /* Modified */
.daily-tasks-list::-webkit-scrollbar, /* Added */
.ai-chat-page.vk-style .chat-messages-container::-webkit-scrollbar,
.ai-chat-page.vk-style .chat-input-area textarea::-webkit-scrollbar,
.personalization-modal-content::-webkit-scrollbar,
.modal-content::-webkit-scrollbar, /* General modal scrollbar */
.version-history-page::-webkit-scrollbar /* Version history page scrollbar */
{
  display: none;
  width: 0; 
  height: 0; 
}
body, 
.dashboard-content, 
.admin-content, 
.chat-sessions-list, 
.support-tickets-sidebar ul,
.code-block-wrapper, 
.top-users-list, 
.achievements-list, /* Modified */
.daily-tasks-list, /* Added */
.ai-chat-page.vk-style .chat-messages-container,
.ai-chat-page.vk-style .chat-input-area textarea,
.personalization-modal-content,
.modal-content, /* General modal scrollbar */
.version-history-page /* Version history page scrollbar */
{
  scrollbar-width: none; 
  -ms-overflow-style: none; 
}
.dashboard-content, .admin-content, .chat-sessions-list, .support-tickets-sidebar ul, .code-block-wrapper, .top-users-list, .achievements-list, .daily-tasks-list,
.ai-chat-page.vk-style .chat-messages-container,
.ai-chat-page.vk-style .chat-input-area textarea,
.personalization-modal-content,
.modal-content, /* General modal scrollbar */
.version-history-page /* Version history page scrollbar */
{
  overflow-y: auto;
}
.code-block-wrapper {
  overflow-x: auto;
}


#root { display: flex; flex-direction: column; min-height: 100vh; position: relative; z-index: 1; } 
.app-container { display: flex; flex-direction: column; flex-grow: 1; background-color: transparent; position: relative; z-index: 1; }
.loading-app { justify-content: center; align-items: center; text-align:center; font-size: 1.2em; }
.loading-app .MuiCircularProgress-root { margin-bottom: 15px !important; }


.visually-hidden { position: absolute; width: 1px; height: 1px; margin: -1px; padding: 0; overflow: hidden; clip: rect(0, 0, 0, 0); border: 0; }
.critical-error-container { font-family:sans-serif;padding:20px;text-align:center;color:#D8000C;background-color:#FFD2D2; margin: 20px; border-radius: var(--border-radius);}
.critical-error-container h1 { margin-top: 0; }
.critical-error-container ul { list-style: none; padding-left: 0; text-align: left; display: inline-block; }

/* Main Content Area */
.main-content { flex-grow: 1; width: 100%; position: relative; z-index: 1; } 
.landing-page, .auth-page, .version-history-page {
  padding: var(--content-padding); 
  max-width: var(--content-max-width); 
  margin: 0 auto; 
  animation: fadeIn var(--animation-speed-slow) ease-out; 
}

.landing-section { margin-bottom: 40px; } 
.page-title { font-size: 2.2em; color: var(--text-color); margin-top: 0; margin-bottom: 25px; font-weight: 700; }
.sub-page-title { font-size: 1.8em; color: var(--text-color); margin-bottom: 20px; font-weight: 600; border-bottom: 1px solid var(--divider-color); padding-bottom: 12px; }
.chat-page-title { margin-bottom: 15px !important; border-bottom: none !important; padding-bottom: 0 !important; }

.landing-page-nav {
  display: flex; 
  gap: 10px; 
  margin-bottom: 30px; 
  padding-bottom: 15px; 
  border-bottom: 1px solid var(--divider-color); 
  flex-wrap: wrap; 
}
.landing-content-section { display: none; animation: fadeInContent 0.6s ease-out; } 
.landing-content-section.active { display: block; }

.content-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(320px, 1fr)); gap: 25px; } 
.content-image { 
  width: 100%; height: 220px; 
  object-fit: cover; 
  background-color: var(--background-color); 
  cursor: zoom-in; 
  transition: filter var(--transition-speed), transform 0.3s ease-out; 
  border-radius: var(--border-radius-small) var(--border-radius-small) 0 0; 
}

/* Floating effect for cards and containers */
.floating-card, .floating-container {
  transition: transform var(--transition-speed) ease-out, box-shadow var(--transition-speed) ease-out !important; /* Ensure transition applies */
}
.floating-card:hover { /* For News and Project Cards */
  transform: translateY(-6px) scale(1.02) !important;
  box-shadow: var(--box-shadow-strong) !important;
}
.floating-container:hover { /* For About Us and Order section containers */
  transform: translateY(-6px) !important;
  box-shadow: var(--box-shadow-strong) !important;
}


.about-us-content-wrapper { /* Applied to Paper in About Us section */
  padding: 35px 45px;
  border-radius: var(--border-radius-large); 
  text-align: center;
  margin: 30px auto;
  max-width: 800px;
  position: relative; 
  z-index: 10;
  background-color: var(--card-background-color); 
  color: var(--text-color); 
}

.order-section-content { /* Class for Paper in Order section */
}


.auth-page { display: flex; justify-content: center; align-items: center; flex-grow: 1; animation: fadeIn var(--animation-speed-medium) ease-out; }
.auth-container {
  width: 100%;
  max-width: 420px; 
  padding: 25px 30px; 
  background-color: var(--card-background-color); 
  border-radius: var(--border-radius-large); 
  box-shadow: var(--box-shadow); 
}
.error-message, .info-message { 
  padding: 10px 15px;
  margin-bottom: 15px;
  border-radius: var(--border-radius-small);
  font-size: 0.9em;
}
.error-message { background-color: color-mix(in srgb, var(--error-color) 15%, transparent); color: var(--error-color); border: 1px solid color-mix(in srgb, var(--error-color) 30%, transparent); }
.info-message { background-color: color-mix(in srgb, var(--info-color) 15%, transparent); color: var(--info-color); border: 1px solid color-mix(in srgb, var(--info-color) 30%, transparent); }
.auth-switch { margin-top: 20px; text-align: center; font-size: 0.9em; }

.sidebar-ad-placeholder {
  padding: 15px;
  margin: 15px 10px;
  background-color: color-mix(in srgb, var(--primary-color) 8%, transparent); 
  border-radius: var(--border-radius);
  border: 1px solid color-mix(in srgb, var(--primary-color) 20%, transparent);
  text-align: center;
}
.sidebar-ad-placeholder a { text-decoration: none; color: inherit; }
.sidebar-ad-placeholder h4 { font-size: 0.95em; color: var(--primary-color); margin-top: 0; margin-bottom: 5px; font-weight: 600; }
.sidebar-ad-placeholder p { font-size: 0.85em; color: var(--subtle-text-color); margin-bottom: 0; line-height: 1.4; }

.account-info-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; }
.account-info-card { 
  padding: 20px;
  border-radius: var(--border-radius);
  background-color: var(--card-background-color);
  box-shadow: var(--box-shadow-light);
}
.achievements-card, .daily-tasks-card { 
    margin-top: 20px; 
    grid-column: 1 / -1; 
}

/* Minimalistic Achievements */
.achievements-list {
    list-style: none; padding: 0; margin: 0;
    display: grid; grid-template-columns: repeat(auto-fill, minmax(180px, 1fr)); /* Smaller minmax */
    gap: 15px; /* Reduced gap */
    margin-bottom: 20px; max-height: 380px; 
}
.achievement-item { 
    padding: 12px 10px; /* Reduced padding */
    border-radius: var(--border-radius-small); /* Smaller radius */
    border: 1px solid var(--border-color); 
    border-left-width: 4px; /* Slightly thinner border */
    display: flex; flex-direction: column; align-items: center; text-align: center;
    transition: transform var(--transition-speed), box-shadow var(--transition-speed);
    position: relative; background-color: var(--secondary-background-color); 
    min-height: 120px; /* Ensure some height */
}
.achievement-item:hover { transform: translateY(-2px); box-shadow: var(--box-shadow); }
.achievement-item.earned { border-left-color: var(--success-color); } 
.achievement-item.locked { opacity: 0.6; } /* Slightly more opaque */
.achievement-item .achievement-icon { 
  font-size: 2em; /* Smaller icon */
  margin-bottom: 8px; 
}
.achievement-item .achievement-name { 
  font-weight: 500; /* Slightly lighter weight */
  margin-bottom: 4px; 
  font-size: 0.9em; /* Smaller name */
  line-height: 1.3;
}
/* Description is removed visually from here, handled by Tooltip */
.achievement-item .achievement-description { display: none; }

.achievement-item .achievement-level {
  padding: 2px 6px; /* Smaller padding */
  border-radius: var(--border-radius-small); font-size: 0.7em; /* Smaller level text */
  font-weight: bold; text-transform: uppercase; letter-spacing: 0.5px;
  margin-top: auto; 
}
.achievement-item .achievement-points { 
  font-size: 0.75em; /* Smaller points */
  color: var(--accent-color); font-weight: 500; margin-top: 3px; 
}
.achievement-item.secret.locked .achievement-icon { filter: grayscale(1) blur(1.5px); font-size: 1.8em; }
.achievement-item.secret .achievement-name { font-style: italic; font-size: 0.85em; }


/* Minimalistic Daily Tasks */
.daily-tasks-list {
    list-style: none; padding: 0; margin: 0;
    display: flex; /* Changed to flex for row layout */
    flex-wrap: wrap; /* Allow wrapping on smaller screens */
    gap: 15px; /* Gap between items */
    margin-bottom: 20px;
}
.daily-task-item {
    flex: 1 1 280px; /* Flex grow, shrink, basis - adjust basis as needed */
    max-width: 350px; /* Max width for each item */
    padding: 15px;
    border-radius: var(--border-radius);
    border: 1px solid var(--border-color);
    background-color: var(--secondary-background-color);
    display: flex;
    flex-direction: column;
    transition: opacity 0.3s ease, filter 0.3s ease;
}
.daily-task-item.claimed {
    opacity: 0.6;
    filter: grayscale(50%);
}
.daily-task-item .task-header {
    display: flex;
    align-items: center;
    margin-bottom: 10px;
}
.daily-task-item .task-icon {
    font-size: 1.8em;
    margin-right: 12px;
    color: var(--primary-color);
}
.daily-task-item .task-info {
    flex-grow: 1;
}
.daily-task-item .task-name {
    font-weight: 500;
    font-size: 1em;
    margin-bottom: 3px;
}
.daily-task-item .task-description {
    font-size: 0.8em;
    color: var(--subtle-text-color);
    line-height: 1.3;
    min-height: 30px; /* Ensure some space for description */
}
.daily-task-item .task-reward {
    font-size: 0.9em;
    font-weight: bold;
    color: var(--accent-color);
    margin-left: 10px;
    white-space: nowrap;
}
.daily-task-item .task-progress-bar { /* If using Mui LinearProgress, style it via sx prop */
    height: 6px;
    border-radius: var(--border-radius-small);
    margin-bottom: 8px;
}
.daily-task-item .task-progress-text {
    font-size: 0.8em;
    color: var(--subtle-text-color);
}
.daily-task-item .task-actions {
    margin-top: auto; /* Pushes actions to the bottom */
    padding-top: 10px; /* Space above actions */
    display: flex;
    justify-content: space-between;
    align-items: center;
}
.daily-task-item .task-timer {
    font-size: 1.1em;
    font-weight: 500;
    color: var(--text-color);
}
.daily-task-item .task-claim-button { /* Style Mui Button via sx or classes */
    font-size: 0.85em !important;
    padding: 6px 12px !important;
}
.daily-task-item .task-completed-message {
    font-size: 0.85em;
    color: var(--success-color);
    display: flex;
    align-items: center;
}


.user-points-card .points-display { font-size: 2.5em; font-weight: bold; color: var(--primary-color); margin: 10px 0; }
.coming-soon-text { font-style: italic; color: var(--subtle-text-color); font-size: 0.9em; }


/* AI Chat Page & Help Chat & Admin Support Chat Common Layout (VK Style) */
.ai-chat-page.vk-style, .help-chat-section.vk-style, .admin-support-section.vk-style {
  display: flex; 
  flex-direction: row; /* Default side-by-side for desktop */
  height: 100%; 
  max-width: 100%; 
  margin: 0 auto;
  background-color: transparent; 
  animation: fadeIn var(--animation-speed-medium) ease-out; 
  gap: 0;
  overflow: hidden; 
}

/* Chat Sessions Sidebar (Desktop and Base) */
/* Widths are now primarily controlled by CSS variables which were reduced */
.ai-chat-page.vk-style .chat-sessions-sidebar,
.help-chat-section.vk-style .chat-sessions-sidebar,
.admin-support-section.vk-style .chat-sessions-sidebar {
  width: var(--dashboard-sidebar-width); 
  flex-shrink: 0;
  background-color: var(--vk-chat-sidebar-bg);
  border-right: 1px solid var(--vk-chat-sidebar-border);
  display: flex;
  flex-direction: column;
  height: 100%;
  overflow-y: hidden;
  transition: transform 0.3s ease-in-out, width 0.3s ease-in-out;
  position: relative; /* For z-index context if needed later */
  z-index: 100;
}

.help-chat-section.vk-style .chat-sessions-sidebar { width: var(--help-chat-sidebar-width); }
.admin-support-section.vk-style .chat-sessions-sidebar { width: var(--admin-support-sidebar-width); }

.ai-chat-page.vk-style .chat-sessions-sidebar .chat-sessions-list,
.help-chat-section.vk-style .chat-sessions-sidebar .chat-sessions-list,
.admin-support-section.vk-style .chat-sessions-sidebar .chat-sessions-list {
  flex-grow: 1;
  overflow-y: auto;
  padding: 8px;
}
/* Sidebar items minimal styling */
.ai-chat-page.vk-style .chat-sessions-sidebar .MuiListItemButton-root,
.help-chat-section.vk-style .chat-sessions-sidebar .MuiListItemButton-root,
.admin-support-section.vk-style .chat-sessions-sidebar .MuiListItemButton-root {
    padding: 8px 12px; /* Reduced padding */
}
.ai-chat-page.vk-style .chat-sessions-sidebar .MuiListItemText-primary,
.help-chat-section.vk-style .chat-sessions-sidebar .MuiListItemText-primary,
.admin-support-section.vk-style .chat-sessions-sidebar .MuiListItemText-primary {
    font-size: 0.9rem; /* Slightly smaller font */
}
.ai-chat-page.vk-style .chat-sessions-sidebar .MuiListItemText-secondary,
.help-chat-section.vk-style .chat-sessions-sidebar .MuiListItemText-secondary,
.admin-support-section.vk-style .chat-sessions-sidebar .MuiListItemText-secondary {
    font-size: 0.75rem; /* Smaller secondary font */
}


/* Chat Main Area (Desktop and Base) */
.ai-chat-page.vk-style .chat-main-area,
.help-chat-section.vk-style .chat-main-area,
.admin-support-section.vk-style .chat-main-area {
  flex-grow: 1;
  display: flex;
  flex-direction: column;
  height: 100%;
  overflow: hidden; 
  background-color: var(--vk-chat-bg);
}

/* Chat Header (Desktop and Base) */
.ai-chat-page.vk-style .chat-header,
.help-chat-section.vk-style .chat-header,
.admin-support-section.vk-style .chat-header {
  padding: 10px 15px;
  border-bottom: 1px solid var(--vk-chat-header-border);
  background-color: var(--vk-chat-header-bg);
  min-height: var(--header-height);
  display: flex;
  justify-content: space-between;
  align-items: center;
  flex-shrink: 0;
}
.ai-chat-page.vk-style .chat-header .chat-page-title,
.help-chat-section.vk-style .chat-header .chat-page-title,
.admin-support-section.vk-style .chat-header .chat-page-title { margin-bottom: 0 !important; font-size: 1.25rem; } /* Reduced title size */

/* Mobile Chat Toggle Button (Minimalistic) */
.mobile-chat-toggle-button {
  display: none; /* Hidden by default, shown in media query */
  background: var(--primary-color);
  color: white;
  border: none;
  border-radius: 50%;
  width: 50px;
  height: 50px;
  position: fixed;
  bottom: 20px;
  right: 20px;
  z-index: 1010; /* Above chat content, below modals */
  box-shadow: var(--box-shadow-strong);
  font-size: 1.5em;
  align-items: center;
  justify-content: center;
}

.mobile-chat-header-button { /* Minimalistic button in header */
  display: none; /* Hidden on desktop */
}

/* Chat Messages & Input Area (Common styling) */
.ai-chat-page.vk-style .chat-messages-container,
.help-chat-section.vk-style .chat-messages-container,
.admin-support-section.vk-style .chat-messages-container {
  flex-grow: 1;
  overflow-y: auto;
  padding: 15px;
}

.message-bubble-wrapper {
  display: flex;
  margin-bottom: 12px;
  animation: messageAppearAnimation 0.3s ease-out forwards;
}
.message-bubble-wrapper.user { justify-content: flex-end; }
.message-bubble-wrapper.model, .message-bubble-wrapper.admin { justify-content: flex-start; }

.message-bubble {
  padding: 10px 15px;
  border-radius: 18px;
  max-width: 75%;
  word-wrap: break-word;
  box-shadow: var(--box-shadow-light);
  line-height: 1.45;
}
.message-bubble.user {
  background-color: var(--vk-chat-user-bg);
  color: var(--vk-chat-user-text);
  border-bottom-right-radius: 8px;
}
.message-bubble.model, .message-bubble.admin {
  background-color: var(--vk-chat-model-bg);
  color: var(--vk-chat-model-text);
  border-bottom-left-radius: 8px;
}
.message-sender-name {
  font-size: 0.8em;
  font-weight: 600;
  color: var(--subtle-text-color);
  margin-bottom: 4px;
  display: block;
}
.message-bubble-wrapper.user .message-sender-name { display: none; }

.message-timestamp {
  font-size: 0.75em;
  color: var(--subtle-text-color);
  margin-top: 6px;
  display: block;
  opacity: 0.8;
}
.message-bubble.user .message-timestamp { text-align: right; color: color-mix(in srgb, var(--vk-chat-user-text) 70%, transparent); }
.message-bubble.model .message-timestamp, .message-bubble.admin .message-timestamp { text-align: left; }


.ai-chat-page.vk-style .chat-input-area,
.help-chat-section.vk-style .chat-input-area,
.admin-support-section.vk-style .chat-input-area {
  display: flex;
  align-items: flex-end;
  padding: 10px 15px;
  border-top: 1px solid var(--vk-chat-header-border);
  background-color: var(--vk-chat-input-bg);
  min-height: var(--chat-input-area-height);
  flex-shrink: 0;
}
.ai-chat-page.vk-style .chat-input-area textarea,
.help-chat-section.vk-style .chat-input-area textarea,
.admin-support-section.vk-style .chat-input-area textarea {
    flex-grow: 1;
    padding: 10px 15px;
    border-radius: 20px;
    border: 1px solid var(--vk-chat-input-border);
    resize: none;
    font-size: 1em;
    line-height: 1.4;
    margin-right: 10px;
    background-color: var(--secondary-background-color);
    color: var(--text-color);
    max-height: 120px;
    overflow-y: auto;
}
.ai-chat-page.vk-style .chat-input-area .chat-send-button,
.help-chat-section.vk-style .chat-input-area .chat-send-button,
.admin-support-section.vk-style .chat-input-area .chat-send-button {
    background-color: var(--vk-chat-send-button-color);
    color: white;
    border: none;
    border-radius: 50%;
    width: 48px; /* Increased from 44px for better touch target on mobile */
    height: 48px; /* Increased from 44px */
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    font-size: 1.6em; /* Slightly increased */
    flex-shrink: 0;
    transition: background-color var(--transition-speed);
    padding: 0; 
}
.ai-chat-page.vk-style .chat-input-area .chat-send-button:disabled,
.help-chat-section.vk-style .chat-input-area .chat-send-button:disabled,
.admin-support-section.vk-style .chat-input-area .chat-send-button:disabled {
    background-color: var(--subtle-text-color);
    cursor: not-allowed;
}
.ai-chat-page.vk-style .chat-input-area .chat-send-button:hover:not(:disabled),
.help-chat-section.vk-style .chat-input-area .chat-send-button:hover:not(:disabled),
.admin-support-section.vk-style .chat-input-area .chat-send-button:hover:not(:disabled) {
    background-color: color-mix(in srgb, var(--vk-chat-send-button-color) 85%, black);
}


/* Modal Styles */
.modal-overlay {
  position: fixed; top: 0; left: 0; width: 100%; height: 100%;
  background-color: rgba(0, 0, 0, 0.6); 
  backdrop-filter: blur(8px); -webkit-backdrop-filter: blur(8px);
  display: flex; justify-content: center; align-items: center;
  z-index: 2000; 
  animation: fadeInModalOverlay var(--animation-speed-fast) ease-out;
  padding: 15px; 
}

.modal-content {
  background-color: var(--modal-background-color);
  padding: 25px 30px;
  border-radius: var(--border-radius-large);
  box-shadow: var(--box-shadow-strong);
  width: 100%;
  max-width: 550px; 
  max-height: 90vh;
  overflow-y: auto;
  position: relative; 
  animation: fadeIn var(--animation-speed-medium) ease-out;
}

.ai-settings-modal .form-group,
.name-input-modal .form-group {
    margin-bottom: 20px;
}
.ai-settings-modal .form-group label,
.name-input-modal .form-group label {
    display: block;
    margin-bottom: 8px;
    font-weight: 500;
    color: var(--text-color);
}
.ai-settings-modal textarea,
.ai-settings-modal select,
.name-input-modal input[type="text"] { 
    width: 100%;
    padding: 12px 15px;
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius-small);
    font-size: 1rem;
    background-color: var(--secondary-background-color);
    color: var(--text-color);
    transition: border-color var(--transition-speed), box-shadow var(--transition-speed);
}
.ai-settings-modal textarea:focus,
.ai-settings-modal select:focus,
.name-input-modal input[type="text"]:focus { 
    border-color: var(--primary-color);
    box-shadow: 0 0 0 3px color-mix(in srgb, var(--primary-color) 20%, transparent);
    outline: none;
}
.ai-settings-modal .instruction-hint {
    font-size: 0.8em;
    color: var(--subtle-text-color);
    margin-top: 6px;
    line-height: 1.4;
}
.ai-settings-modal .modal-actions,
.name-input-modal .modal-actions { 
    display: flex;
    justify-content: flex-end;
    gap: 12px;
    margin-top: 25px;
}

.modal-button {
    padding: 10px 20px; border-radius: var(--border-radius-small); cursor: pointer;
    font-weight: 500; transition: background-color var(--transition-speed), opacity var(--transition-speed);
    font-size: 0.95em; border: 1px solid transparent; text-transform: none;
}
.modal-button.primary { background-color: var(--primary-color); color: white; border-color: var(--primary-color); }
.modal-button.primary:hover { background-color: color-mix(in srgb, var(--primary-color) 85%, black); border-color: color-mix(in srgb, var(--primary-color) 85%, black); }
.modal-button.secondary { background-color: var(--secondary-background-color); color: var(--text-color); border-color: var(--border-color); }
.modal-button.secondary:hover { background-color: var(--divider-color); }
.modal-button.tertiary { background-color: transparent; color: var(--primary-color); }
.modal-button.tertiary:hover { background-color: color-mix(in srgb, var(--primary-color) 10%, transparent); }
.modal-button:disabled { opacity: 0.6; cursor: not-allowed; }


.rte-toolbar { display: flex; flex-wrap: wrap; gap: 5px; margin-bottom: 8px; padding: 5px; background-color: var(--secondary-background-color); border-radius: var(--border-radius-small); border: 1px solid var(--divider-color); }
.rte-button {
  padding: 6px 10px; font-size: 0.85em; background-color: transparent;
  border: 1px solid var(--border-color); border-radius: var(--border-radius-small);
  cursor: pointer; transition: background-color var(--transition-speed); color: var(--text-color);
}
.rte-button:hover { background-color: var(--divider-color); }
.rte-button b, .rte-button i { font-weight: bold; font-style: normal; }


/* Mobile Specific Chat Layout Overrides */
@media (max-width: 768px) and (pointer: coarse) {
  /* Hide desktop sidebar by default on mobile */
  .ai-chat-page.vk-style .chat-sessions-sidebar,
  .help-chat-section.vk-style .chat-sessions-sidebar,
  .admin-support-section.vk-style .chat-sessions-sidebar {
    position: fixed; /* Or absolute if parent is relative and full height */
    top: 0; /* Or adjust if below a mobile header */
    left: 0;
    width: 85%; /* Adjust width as needed */
    max-width: 300px;
    height: 100%;
    transform: translateX(-100%); /* Hidden off-screen */
    z-index: 1000; /* Above chat content */
    border-right: 1px solid var(--vk-chat-sidebar-border); /* Keep border */
    box-shadow: 2px 0 10px rgba(0,0,0,0.1);
    transition: transform 0.3s ease-in-out;
  }

  /* When mobile sidebar is active */
  .ai-chat-page.vk-style .chat-sessions-sidebar.mobile-sidebar-active,
  .help-chat-section.vk-style .chat-sessions-sidebar.mobile-sidebar-active,
  .admin-support-section.vk-style .chat-sessions-sidebar.mobile-sidebar-active {
    transform: translateX(0);
  }
  
  /* Chat Main Area on Mobile - should be full width */
  .ai-chat-page.vk-style .chat-main-area,
  .help-chat-section.vk-style .chat-main-area,
  .admin-support-section.vk-style .chat-main-area {
    width: 100%;
    border-right: none; /* Remove right border if it was for desktop sidebar */
    height: calc(100vh - var(--header-height)); /* Full height minus global header */
  }
  .dashboard-layout .ai-chat-page.vk-style .chat-main-area,
  .dashboard-layout .help-chat-section.vk-style .chat-main-area,
  .dashboard-layout .admin-support-section.vk-style .chat-main-area {
     height: 100%; /* Full height within dashboard content area */
  }


  /* Chat Header on Mobile */
  .ai-chat-page.vk-style .chat-header,
  .help-chat-section.vk-style .chat-header,
  .admin-support-section.vk-style .chat-header {
     position: sticky; /* Make chat header sticky on mobile */
     top: 0;
     z-index: 100; /* Above messages */
  }
  .ai-chat-page.vk-style .chat-header .chat-controls,
  .help-chat-section.vk-style .chat-header .chat-controls,
  .admin-support-section.vk-style .chat-header .chat-controls {
      gap: 0; /* Reduce gap for mobile header buttons */
  }
  .ai-chat-page.vk-style .chat-header .chat-controls .MuiIconButton-root,
  .help-chat-section.vk-style .chat-header .chat-controls .MuiIconButton-root,
  .admin-support-section.vk-style .chat-header .chat-controls .MuiIconButton-root {
      padding: 8px; /* Smaller padding for mobile header buttons */
  }
  .ai-chat-page.vk-style .chat-header .ai-request-info {
      display: none !important; /* Hide request info on mobile chat header */
  }

  /* Minimalistic buttons for mobile header */
  .mobile-chat-header-button {
    display: inline-flex; /* Show the mobile header button */
    margin-right: 8px;
  }

  /* Chat Input Area on Mobile */
  .ai-chat-page.vk-style .chat-input-area,
  .help-chat-section.vk-style .chat-input-area,
  .admin-support-section.vk-style .chat-input-area {
    padding: 8px 10px; /* Slightly reduce padding for mobile */
  }
  .ai-chat-page.vk-style .chat-input-area textarea,
  .help-chat-section.vk-style .chat-input-area textarea,
  .admin-support-section.vk-style .chat-input-area textarea {
    margin-right: 8px;
    font-size: 0.95em; /* Slightly smaller font for mobile input */
  }

  /* Mobile FAB for toggling sidebar (if not using header button) */
  .mobile-chat-toggle-button {
    display: flex; /* Show FAB */
  }
  
  /* Dashboard sidebar on mobile should be temporary */
  .dashboard-layout .MuiDrawer-paper {
      width: var(--dashboard-sidebar-width) !important; /* Ensure consistent width when open */
  }
}


@media (max-width: 992px) { 
  /* This rule was for AI chat, Help chat, Admin Support chat when inside a dashboard layout. 
     It made them column-reverse. We need to ensure this does not conflict with the new mobile-first chat design.
     The new mobile design for chat pages uses fixed/absolute positioning for sidebar, so this rule might be less relevant 
     or needs adjustment if those chat pages are direct views AND inside a dashboard.
     For direct views (e.g., AIChatGuest), the new mobile CSS handles it.
     If these chat pages are embedded within .dashboard-layout, their container needs to be full height.
  */
  .dashboard-layout > .ai-chat-page.vk-style, 
  .dashboard-layout > .help-chat-section.vk-style, 
  .dashboard-layout > .admin-support-section.vk-style {
    /* If these are meant to be full screen sections inside dashboard on mobile, 
       the flex-direction: column-reverse might still apply to the dashboard-layout itself.
       However, the chat components themselves will now manage their own mobile sidebar behavior.
       Let's keep this for now, as it affects the overall dashboard structure for these sections on tablets.
    */
    flex-direction: column; 
  } 

  /*
  .ai-chat-page.vk-style .chat-sessions-sidebar,
  .help-chat-section.vk-style .chat-sessions-sidebar,
  .admin-support-section.vk-style .chat-sessions-sidebar { 
    width: 100% !important; 
    border-left: none; border-top: 1px solid var(--vk-chat-sidebar-border);
    border-right: none; max-height: 280px; 
  }
  The above block is now handled by the new mobile chat sidebar logic if (pointer: coarse) is met.
  If only max-width: 992px is met (e.g. landscape tablet without touch as primary), this old style might apply.
  This needs careful testing. For now, let the new (max-width: 768px) and (pointer: coarse) take precedence.
  */
  
  .content-grid { grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); }
}
@media (max-width: 768px) {
  :root { 
    --dashboard-sidebar-width: 220px; /* Reduced for mobile */
    --dashboard-sidebar-width-iconic: 68px; /* Reduced for mobile */
    --help-chat-sidebar-width: 240px; 
    --admin-support-sidebar-width: 260px;
    --content-padding: 16px; /* Reduced for mobile */
  }
  .page-title { font-size: 2em; } .sub-page-title { font-size: 1.6em; }
}
@media (max-width: 480px) {
  :root {
    --font-size-base: 15px; --font-size-xs: 12px; --font-size-s: 13.5px;
    --font-size-m: 15px; --font-size-l: 16.5px; --content-padding: 15px;
    --header-height: 56px;
  }
  .page-title { font-size: 1.8em; } .sub-page-title { font-size: 1.5em; }
  .auth-container { padding: 20px; }
  .modal-content { padding: 20px; }
  .message-bubble { max-width: 85%; } /* Allow slightly wider bubbles on small screens */
  .achievements-list { grid-template-columns: repeat(auto-fill, minmax(150px, 1fr)); } /* Adjust for very small screens */
  .daily-tasks-list { flex-direction: column; } /* Stack tasks vertically on very small screens */
  .daily-task-item { max-width: none; }
}
.spinner { width: 22px; height: 22px; border: 3px solid color-mix(in srgb, var(--primary-color) 20%, transparent); border-left-color: var(--primary-color); border-radius: 50%; animation: spin 1s linear infinite; }
.spinner.small { width: 18px; height: 18px; border-width: 2.5px; }
.spinner.large { width: 36px; height: 36px; border-width: 4px; }
@keyframes spin { to { transform: rotate(360deg); } }

@keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
@keyframes fadeInModalOverlay { from { opacity: 0; } to { opacity: 1; } }
@keyframes fadeInContent { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
@keyframes cardEnterAnimation {
  0% { opacity: 0; transform: translateY(50px) scale(0.9); }
  70% { opacity: 1; transform: translateY(-10px) scale(1.05); }
  100% { opacity: 1; transform: translateY(0) scale(1); }
}
@keyframes messageAppearAnimation {
  from { opacity: 0; transform: translateY(15px) scale(0.98); }
  to { opacity: 1; transform: translateY(0) scale(1); }
}

.spinner-dots { display: flex; }
.spinner-dots div { width: 6px; height: 6px; background-color: var(--subtle-text-color); border-radius: 50%; margin: 0 2px; animation: spinnerDotsAnimation 1.4s infinite ease-in-out both; }
.spinner-dots div:nth-child(1) { animation-delay: -0.32s; }
.spinner-dots div:nth-child(2) { animation-delay: -0.16s; }
@keyframes spinnerDotsAnimation { 0%, 80%, 100% { transform: scale(0); } 40% { transform: scale(1.0); } }

.toast-notification-container { position: fixed; top: 20px; right: 20px; z-index: 9999; display: flex; flex-direction: column; gap: 10px; }
.toast-notification { 
  padding: 12px 18px; border-radius: var(--border-radius-small); 
  color: white; font-size: 0.95em; display: flex; align-items: center; 
  justify-content: space-between; min-width: 280px; max-width: 350px;
  box-shadow: var(--box-shadow);
  animation: fadeInToast 0.3s ease-out, fadeOutToast 0.3s ease-in var(--toast-duration, 4.7s) forwards;
  backdrop-filter: blur(5px); -webkit-backdrop-filter: blur(5px);
}
.toast-notification.success { background-color: color-mix(in srgb, var(--success-color) 85%, transparent); }
.toast-notification.error { background-color: color-mix(in srgb, var(--error-color) 85%, transparent); }
.toast-notification.info { background-color: color-mix(in srgb, var(--info-color) 85%, transparent); }
.toast-close-button { background: none; border: none; color: white; font-size: 1.2em; cursor: pointer; padding: 0 0 0 10px; line-height: 1; }
@keyframes fadeInToast { from { opacity: 0; transform: translateX(100%); } to { opacity: 1; transform: translateX(0); } }
@keyframes fadeOutToast { from { opacity: 1; transform: translateX(0); } to { opacity: 0; transform: translateX(100%); } }

.admin-section-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; flex-wrap: wrap; gap: 15px;}
.admin-item-list { list-style: none; padding: 0; margin: 0; display: flex; flex-direction: column; gap: 15px; }
.admin-item { 
  padding: 15px 20px; border-radius: var(--border-radius);
  background-color: var(--card-background-color); box-shadow: var(--box-shadow-light);
  display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 10px;
}
.admin-item-info h3 { margin-top: 0; margin-bottom: 5px; font-size: 1.1em; }
.admin-item-info p { margin: 3px 0; font-size: 0.9em; color: var(--subtle-text-color); }
.admin-item-actions { display: flex; gap: 10px; }

.primary-button, .admin-add-button.primary-button, .settings-button.primary-button {
    background-color: var(--primary-color); color: white; padding: 10px 18px;
    border: none; border-radius: var(--border-radius-small); cursor: pointer;
    font-size: 0.95em; text-decoration: none;
    transition: background-color var(--transition-speed), opacity var(--transition-speed);
    display: inline-flex; align-items: center; gap: 8px;
}
.primary-button:hover, .admin-add-button.primary-button:hover, .settings-button.primary-button:hover {
    background-color: color-mix(in srgb, var(--primary-color) 85%, black);
}
.primary-button:disabled, .admin-add-button.primary-button:disabled, .settings-button.primary-button:disabled {
    opacity: 0.65; cursor: not-allowed;
}

.admin-action-button {
    padding: 8px 14px; border-radius: var(--border-radius-small); cursor: pointer;
    font-size: 0.9em; border: 1px solid transparent;
    transition: background-color var(--transition-speed), border-color var(--transition-speed), color var(--transition-speed);
}
.admin-action-button.edit-button { background-color: var(--info-color); color: white; border-color: var(--info-color); }
.admin-action-button.edit-button:hover { background-color: color-mix(in srgb, var(--info-color) 80%, black); border-color: color-mix(in srgb, var(--info-color) 80%, black); }
.admin-action-button.delete-button { background-color: var(--error-color); color: white; border-color: var(--error-color); }
.admin-action-button.delete-button:hover { background-color: color-mix(in srgb, var(--error-color) 80%, black); border-color: color-mix(in srgb, var(--error-color) 80%, black); }


.news-editor-modal .modal-content, .project-editor-modal .modal-content { max-width: 700px; }
.news-editor-modal textarea, .project-editor-modal textarea { min-height: 120px; }
.action-buttons-group .add-action-button-form { display: flex; gap: 10px; margin-top: 10px; align-items: center; }
.action-buttons-group .action-button-item { display: flex; justify-content: space-between; align-items: center; padding: 5px; border-radius: var(--border-radius-small); background-color: var(--background-color); margin-bottom: 5px; }
.remove-action-button { background: none; border: none; color: var(--error-color); cursor: pointer; font-size: 1.2em; }

.client-key-display {
  font-family: 'Courier New', Courier, monospace; background-color: var(--divider-color);
  padding: 2px 6px; border-radius: var(--border-radius-small); font-size: 0.9em; word-break: break-all;
}
.settings-block {
  margin-bottom: 30px; padding: 20px; background-color: var(--secondary-background-color); 
  border-radius: var(--border-radius); box-shadow: var(--box-shadow-light);
}
.settings-block h3 {
  margin-top: 0; margin-bottom: 15px; font-size: 1.25em; color: var(--text-color);
  border-bottom: 1px solid var(--divider-color); padding-bottom: 8px;
}
.settings-form .form-group { margin-bottom: 15px; }
.settings-form .form-group label { display: block; margin-bottom: 5px; font-weight: 500; }
.settings-form .form-group input[type="text"],
.settings-form .form-group input[type="url"],
.settings-form .form-group input[type="number"], 
.settings-form .form-group textarea {
  width: 100%; padding: 10px; border: 1px solid var(--border-color);
  border-radius: var(--border-radius-small); font-size: 1rem;
  background-color: var(--secondary-background-color); color: var(--text-color);
}
.settings-form .form-group input:focus,
.settings-form .form-group textarea:focus {
  border-color: var(--primary-color);
  box-shadow: 0 0 0 2px color-mix(in srgb, var(--primary-color) 20%, transparent);
  outline: none;
}


.form-group-checkbox { display: flex; align-items: center; gap: 8px; }
.form-group-checkbox input[type="checkbox"] { width: auto; margin-right: 5px; transform: scale(1.2); }

/* Help Chat / Support Ticket specific styles */
.support-tickets-sidebar h3 { 
  padding: 15px 18px 10px 18px;
  font-size: 1.1em;
  font-weight: 600;
  margin: 0;
  color: var(--text-color);
  border-bottom: 1px solid var(--vk-chat-sidebar-border);
}
.support-tickets-sidebar .new-chat-button {
    display: block; width: calc(100% - 30px); margin: 15px auto; 
    padding: 12px 15px; background-color: var(--primary-color); color: white;
    border: none; border-radius: var(--border-radius); cursor: pointer;
    text-align: center; font-size: 0.95em; font-weight: 500;
    transition: background-color var(--transition-speed);
}
.support-tickets-sidebar .new-chat-button:hover {
    background-color: color-mix(in srgb, var(--primary-color) 85%, black);
}

.support-tickets-sidebar .chat-session-button { 
  width: calc(100% - 16px); margin: 0 8px 8px 8px; text-align: left;
  padding: 12px 15px; background-color: transparent;
  border: 1px solid var(--divider-color); border-radius: var(--border-radius-small);
  cursor: pointer; display: flex; flex-direction: column; align-items: flex-start;
  position: relative; transition: background-color var(--transition-speed), border-color var(--transition-speed);
  color: var(--text-color); 
}
.support-tickets-sidebar .chat-session-button:hover {
  background-color: var(--divider-color); border-color: var(--border-color);
}
.support-tickets-sidebar li.active .chat-session-button {
  background-color: color-mix(in srgb, var(--primary-color) 10%, transparent);
  border-left: 4px solid var(--primary-color); padding-left: 12px; 
}

.ticket-status-indicator { 
  width: 10px; height: 10px; border-radius: 50%;
  position: absolute; top: 16px; left: 12px;
}
.support-tickets-sidebar li.active .chat-session-button .ticket-status-indicator { left: 9px; }

.chat-session-button .ticket-subject { font-weight: 500; margin-left: 22px; white-space: normal; word-break: break-word; font-size: 0.95em; }
.chat-session-button .ticket-date { font-size: 0.8em; color: var(--subtle-text-color); margin-left: 22px; margin-top: 3px; }
.unread-indicator.user-unread { 
  background-color: var(--accent-color); color: white; 
  border-radius: 50%; width: 18px; height: 18px; 
  display: inline-flex; align-items: center; justify-content: center;
  font-size: 0.75em; font-weight: bold; 
  position: absolute; top: 12px; right: 12px;
}

.ticket-status-indicator.open { background-color: var(--success-color); }
.ticket-status-indicator.pending_admin { background-color: var(--warning-color); }
.ticket-status-indicator.pending_user { background-color: var(--info-color); }
.ticket-status-indicator.closed { background-color: var(--subtle-text-color); }

.no-active-ticket-placeholder { text-align: center; padding: 40px 20px; color: var(--subtle-text-color); margin: auto; }
.no-active-ticket-placeholder h2 { color: var(--text-color); margin-bottom: 15px; }
.ticket-closed-message {
  text-align: center; padding: 15px; margin: 10px;
  background-color: color-mix(in srgb, var(--info-color) 10%, transparent);
  color: var(--info-color);
  border: 1px solid color-mix(in srgb, var(--info-color) 25%, transparent);
  border-radius: var(--border-radius); font-size: 0.9em;
}
.chat-header .chat-controls { display:flex; gap: 8px; align-items: center; }

/* Order Section Specifics */
.order-category-buttons { display: flex; flex-wrap: wrap; gap: 10px; margin-bottom: 25px; }
.order-category-button {
    padding: 10px 18px; border: 1px solid var(--primary-color); background-color: transparent;
    color: var(--primary-color); cursor: pointer; border-radius: var(--border-radius-large); 
    transition: background-color var(--transition-speed), color var(--transition-speed), box-shadow var(--transition-speed);
    font-size: 1em; font-weight: 500; display: inline-flex; align-items: center; gap: 8px;
}
.order-category-button:hover { background-color: color-mix(in srgb, var(--primary-color) 10%, transparent); box-shadow: var(--box-shadow-light); }
.order-category-button.active { background-color: var(--primary-color); color: white; box-shadow: none; }
.order-category-button .category-icon { font-size: 1.2em; }
.order-category-details {
    padding: 20px; background-color: var(--secondary-background-color);
    border-radius: var(--border-radius); margin-top: 20px; border: 1px solid var(--divider-color);
}
.order-category-details h3 { margin-top: 0; color: var(--primary-color); }
.order-category-details h4 { margin-top: 20px; margin-bottom: 8px; font-weight: 600; }
.order-category-details ul { padding-left: 25px; margin-bottom: 15px; }
.order-category-details li { margin-bottom: 8px; line-height: 1.6; }
.order-category-details .primary-button { margin-top: 20px; }


/* Image Lightbox */
.image-lightbox-overlay {
  position: fixed; top: 0; left: 0; right: 0; bottom: 0;
  background-color: rgba(0, 0, 0, 0.85); 
  backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px);
  display: flex; justify-content: center; align-items: center;
  z-index: 3000; 
  animation: fadeInModalOverlay var(--animation-speed-fast) ease-out;
  padding: 20px;
}
.image-lightbox-content { max-width: 90vw; max-height: 90vh; display: flex; justify-content: center; align-items: center; }
.image-lightbox-image { display: block; max-width: 100%; max-height: 100%; border-radius: var(--border-radius-small); box-shadow: 0 8px 30px rgba(0,0,0,0.3); }
.image-lightbox-close-button {
  position: absolute; top: 20px; right: 25px;
  background: rgba(0,0,0,0.5); color: white; border: none;
  font-size: 2.5em; line-height: 1; cursor: pointer;
  width: 40px; height: 40px; border-radius: 50%;
  display: flex; align-items: center; justify-content: center;
  transition: background-color var(--transition-speed);
}
.image-lightbox-close-button:hover { background: rgba(0,0,0,0.7); }

.admin-note {
  background-color: color-mix(in srgb, var(--info-color) 10%, transparent);
  border: 1px solid color-mix(in srgb, var(--info-color) 25%, transparent);
  padding: 15px; border-radius: var(--border-radius); margin-top: 20px; font-size: 0.9em;
}
.admin-note p { margin: 5px 0; }
.admin-note strong { color: var(--info-color); }
.admin-note code { background-color: var(--divider-color); padding: 2px 4px; border-radius: var(--border-radius-small); font-family: monospace; }

.code-block-wrapper {
  background-color: var(--secondary-background-color);
  border: 1px solid var(--divider-color);
  border-radius: var(--border-radius-small);
  margin: 1em 0; position: relative; box-shadow: var(--box-shadow-light);
}
.code-block-header {
  display: flex; justify-content: space-between; align-items: center;
  padding: 8px 12px; background-color: var(--background-color);
  border-bottom: 1px solid var(--divider-color);
  border-radius: var(--border-radius-small) var(--border-radius-small) 0 0;
  font-size: 0.85em; color: var(--subtle-text-color);
}
.code-block-header span { text-transform: uppercase; letter-spacing: 0.5px; }
.copy-code-button { 
  padding: 4px 8px; font-size: 0.8em; background-color: var(--primary-color);
  color: white; border: none; border-radius: var(--border-radius-small);
  cursor: pointer; transition: background-color var(--transition-speed);
}
.copy-code-button:hover { background-color: color-mix(in srgb, var(--primary-color) 80%, black); }
.code-block-wrapper pre {
  margin: 0; padding: 12px 15px; overflow-x: auto;
  font-family: 'Courier New', Courier, monospace; font-size: 0.9em;
  line-height: 1.4; color: var(--text-color);
}
.code-block-wrapper pre code {
  background: none !important; padding: 0 !important;
  font-family: inherit !important; color: inherit !important;
}
.token.comment, .token.prolog, .token.doctype, .token.cdata { color: #708090; }
.token.punctuation { color: #999; }
.token.property, .token.tag, .token.boolean, .token.number, .token.constant, .token.symbol, .token.deleted { color: #905; }
.token.selector, .token.attr-name, .token.string, .token.char, .token.builtin, .token.inserted { color: #690; }
.token.operator, .token.entity, .token.url, .language-css .token.string, .style .token.string { color: #a67f59; }
.token.atrule, .token.attr-value, .token.keyword { color: var(--primary-color); }
.token.function, .token.class-name { color: #DD4A68; }
.token.regex, .token.important, .token.variable { color: #e90; }

.admin-onsite-ad-management-section textarea, 
.admin-advertising-settings-section input[type="text"],
.news-editor-modal input[type="text"], .news-editor-modal input[type="url"], .news-editor-modal textarea,
.project-editor-modal input[type="text"], .project-editor-modal input[type="url"], .project-editor-modal textarea
{ 
  width: 100%; padding: 10px; border: 1px solid var(--border-color); border-radius: var(--border-radius-small);
  font-size: 1rem; background-color: var(--secondary-background-color); color: var(--text-color);
}
.admin-onsite-ad-management-section textarea:focus,
.admin-advertising-settings-section input[type="text"]:focus,
.news-editor-modal input:focus, .news-editor-modal textarea:focus,
.project-editor-modal input:focus, .project-editor-modal textarea:focus
{
  border-color: var(--primary-color); box-shadow: 0 0 0 2px color-mix(in srgb, var(--primary-color) 20%, transparent); outline: none;
}

/* Top Users Modal Specific Styles */
.top-users-modal .modal-content {
  max-width: 600px; 
}
.top-users-list { 
  width: 100%;
}
.top-users-list .MuiTableCell-head {
  font-weight: bold;
  background-color: var(--divider-color);
}
.top-users-list .MuiTableRow-root.current-user-row {
  background-color: color-mix(in srgb, var(--primary-color) 15%, transparent) !important;
  font-weight: bold;
}
.top-users-list .MuiTableCell-body.rank-cell {
  text-align: center;
  width: 15%;
}
.top-users-list .MuiTableCell-body.name-cell {
  width: 55%;
  font-weight: 500;
}
.top-users-list .MuiTableCell-body.points-cell {
  text-align: right;
  width: 30%;
  font-weight: 600;
  color: var(--accent-color);
}

/* Admin Support Chat Sidebar Filter */
.admin-support-section.vk-style .chat-sessions-sidebar .form-group {
  padding: 0 10px 10px 10px;
}
.admin-support-section.vk-style .chat-sessions-sidebar .form-group label {
  font-size: 0.9em;
  margin-bottom: 5px;
  display: block;
  color: var(--subtle-text-color);
}
.admin-support-section.vk-style .chat-sessions-sidebar .form-group select {
  width: 100%;
  padding: 10px;
  border-radius: var(--border-radius-small);
  border: 1px solid var(--border-color);
  background-color: var(--secondary-background-color);
  color: var(--text-color);
  font-size: 0.95em;
}

/* Version History Page Styles */
.version-history-page {
  padding: var(--content-padding);
  max-width: var(--content-max-width);
  margin: 0 auto;
}
.version-history-page .page-title {
  text-align: center;
  margin-bottom: 30px;
}
.version-item {
  background-color: var(--card-background-color);
  border-radius: var(--border-radius);
  padding: 20px;
  margin-bottom: 25px;
  box-shadow: var(--box-shadow-light);
}
.version-item-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  border-bottom: 1px solid var(--divider-color);
  padding-bottom: 10px;
  margin-bottom: 15px;
}
.version-item-header .version-number {
  font-size: 1.5em;
  font-weight: 600;
  color: var(--primary-color);
}
.version-item-header .version-date {
  font-size: 0.9em;
  color: var(--subtle-text-color);
}
.version-changes-list {
  list-style-type: disc;
  padding-left: 25px;
  margin: 0;
}
.version-changes-list li {
  margin-bottom: 8px;
  line-height: 1.6;
}
.version-changes-list li::marker {
  color: var(--primary-color);
}
.version-history-page .primary-button { /* Back button style */
  display: block;
  margin: 30px auto 0;
  width: fit-content;
}

/* Mobile Chat Sidebar Backdrop */
.mobile-sidebar-backdrop {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.4);
    z-index: 999; /* Below sidebar, above main content */
    opacity: 0;
    transition: opacity 0.3s ease-in-out;
}
.mobile-sidebar-backdrop.active {
    display: block;
    opacity: 1;
}

/* Ensure chat pages take full height in dashboard on mobile */
@media (max-width: 768px) and (pointer: coarse) {
    .dashboard-content > .ai-chat-page.vk-style,
    .dashboard-content > .help-chat-section.vk-style,
    .dashboard-content > .admin-support-section.vk-style {
        height: 100%; /* Ensure chat sections take full height within dashboard main area */
        display: flex; /* Ensure flex properties apply correctly */
        flex-direction: column; /* Main area should stack header, messages, input */
    }
}

/* Minimalistic Dashboard & Admin Sidebars */
.dashboard-layout .MuiDrawer-paper .MuiListItemButton-root,
.admin-dashboard-layout .MuiDrawer-paper .MuiListItemButton-root {
    padding-top: 8px; /* Reduced */
    padding-bottom: 8px; /* Reduced */
    padding-left: 16px; /* Reduced */
    padding-right: 16px; /* Reduced */
    margin-bottom: 2px; /* Reduced */
}

.dashboard-layout .MuiDrawer-paper .MuiListItemIcon-root,
.admin-dashboard-layout .MuiDrawer-paper .MuiListItemIcon-root {
    min-width: 36px; /* Reduced */
    margin-right: 12px; /* Reduced */
}
.dashboard-layout .MuiDrawer-paper .MuiListItemIcon-root .MuiSvgIcon-root,
.admin-dashboard-layout .MuiDrawer-paper .MuiListItemIcon-root .MuiSvgIcon-root {
    font-size: 1.25rem; /* Slightly smaller icons */
}

.dashboard-layout .MuiDrawer-paper .MuiListItemText-primary,
.admin-dashboard-layout .MuiDrawer-paper .MuiListItemText-primary {
    font-size: 0.9rem; /* Slightly smaller text */
}
.dashboard-layout .MuiDrawer-paper .MuiToolbar-root .MuiTypography-h6,
.admin-dashboard-layout .MuiDrawer-paper .MuiToolbar-root .MuiTypography-h6 {
    font-size: 1.1rem; /* Smaller sidebar title */
    font-weight: 600;
}
.dashboard-layout .MuiDrawer-paper .MuiToolbar-root,
.admin-dashboard-layout .MuiDrawer-paper .MuiToolbar-root {
    padding-left: 16px; /* Reduced */
    padding-right: 12px; /* Reduced */
}
```CDATA[</content>
  </change>
  <change>
    <file>src/types/auth.ts</file>
    <description>    daily_task_progress   AI-       : `claimed_at_timestamp`, `ai_generated_name`, `ai_generated_description`, `ai_generated_points`, `is_ai_refreshed`.</description>
    <content><![CDATA[import type { User } from '@supabase/supabase-js';

export interface UserProfile extends User {
    id: string;
    email?: string;
    last_sign_in_at?: string | null; // Added to ensure the property exists on UserProfile
    user_metadata: {
        display_name?: string;
        user_viht_id?: string;
        client_key?: string;
        ai_requests_made?: number;
        ai_requests_limit?: number;
        is_premium?: boolean;
        premium_expires_at?: string | null;
        last_request_reset_at?: string | null;
        support_tickets_created?: number;
        activity_points?: number;
        completed_secret_achievements?: string[];
        awarded_achievement_points_log?: Record<string, boolean>; // Tracks if points for an achievement_id have been awarded
        daily_task_progress?: Array<{ // Tracks progress for daily tasks
            task_id: string;
            current_value: number;
            completed_today: boolean; // Task goal met for the day
            claimed_today: boolean;   // Points for this task claimed for theday
            last_progress_date: string; // YYYY-MM-DD format
            claimed_at_timestamp?: number; // Timestamp when reward was claimed, for 24h timer
            ai_generated_name?: string; // AI-generated name for the task
            ai_generated_description?: string; // AI-generated description
            ai_generated_points?: number; // AI-generated points
            is_ai_refreshed?: boolean; // True if current task content is AI-generated
        }>;
        terms_agreed_at?: string | null; // Added for legal agreement
        [key: string]: any;
    };
}

// Placeholder type for the user data admin will see/edit in AdminUsersSection
export interface SearchedUserAdminView extends UserProfile {
    // Potentially add more fields here if needed for admin view
}

export interface TopUser {
  rank: number;
  display_name: string;
  activity_points: number; // Changed from ai_requests_made
  user_viht_id?: string;    // Added for highlighting current user
}